{% extends "base.html" %}
{% block title %}Approve Admins{% endblock %}

{% block content %}
<div class="flex flex-col gap-10 max-w-6xl mx-auto py-8 px-4">
    <!-- Header -->
    <div class="flex flex-col md:flex-row justify-between items-center gap-6">
        <div>
            <h2 class="text-4xl font-black text-soft-dark tracking-tight">Approve <span
                    class="text-soft-primary">Admins</span></h2>
            <p class="text-[0.65rem] font-bold text-soft-primary uppercase tracking-[0.2em] opacity-60">Validate
                new administrative nodes</p>
        </div>
        <div class="flex gap-4">
            <a href="{{ url_for('super_admin.manage_admins') }}" class="nm-button flex items-center gap-2 text-sm">
                <i class="fas fa-users-cog"></i> Manage Active
            </a>
        </div>
    </div>

    <!-- Pending Authorizations -->
    <div class="nm-flat p-6 md:p-10 border-l-8 border-soft-primary">
        <div class="flex items-center gap-4 mb-8">
            <div class="nm-inset p-3 rounded-2xl text-soft-primary">
                <i class="fas fa-shield-alt text-xl"></i>
            </div>
            <div>
                <h5 class="text-xs font-black text-soft-dark uppercase tracking-[0.2em] leading-none mb-1">Security
                    Queue</h5>
                <p class="text-[0.6rem] font-bold text-soft-primary uppercase tracking-widest opacity-60">Pending
                    Registration Requests</p>
            </div>
        </div>

        {% if pending_users %}
        <div class="overflow-x-auto rounded-2xl nm-inset p-1">
            <table class="w-full text-left border-collapse">
                <thead>
                    <tr class="text-soft-primary text-[0.65rem] font-black uppercase tracking-[0.2em]">
                        <th class="py-5 px-6">Admin Name</th>
                        <th class="py-5 px-6">College Name</th>
                        <th class="py-5 px-6 text-right">Action</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-soft-primary/5">
                    {% for user in pending_users %}
                    <tr class="hover:bg-white/40 transition-colors group">
                        <td class="py-5 px-6">
                            <div class="font-black text-soft-dark text-lg mb-0.5 leading-none">{{ user.username }}</div>
                            <div
                                class="text-[0.65rem] font-black text-soft-primary/60 uppercase tracking-widest italic">
                                {{ user.role.name }}</div>
                        </td>
                        <td class="py-5 px-6">
                            <span
                                class="nm-flat px-4 py-1.5 rounded-full text-[0.65rem] font-black text-soft-primary uppercase tracking-widest bg-white/50">
                                {{ user.college.name }} ({{ user.college.formatted_id }})
                            </span>
                        </td>
                        <td class="py-5 px-6 text-right">
                            <div class="flex gap-3 justify-end">
                                <a href="{{ url_for('super_admin.verify_user', user_id=user.id, action='approve') }}"
                                    class="nm-button py-2.5 px-6 text-[0.65rem] uppercase tracking-widest text-green-700 font-black">Approve</a>
                                <a href="{{ url_for('super_admin.verify_user', user_id=user.id, action='reject') }}"
                                    class="nm-button py-2.5 px-6 text-[0.65rem] uppercase tracking-widest text-red-600 font-black"
                                    onclick="return confirm('Reject this user registration?');">Reject</a>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="flex flex-col items-center justify-center py-16 opacity-60">
            <div class="nm-inset w-24 h-24 flex items-center justify-center rounded-full mb-6">
                <i class="fas fa-satellite-dish text-5xl text-soft-primary/30"></i>
            </div>
            <p class="font-black text-soft-primary text-xs uppercase tracking-[0.2em]">All nodes synchronized. No
                pending requests.</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}